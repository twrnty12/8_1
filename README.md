# Домашнее задание к занятию «Многопоточность»

## Тема 1

### Задание 1
<details>
#### Очередь клиентов

Вам нужно создать приложение, которое имитирует очередь в окошко. Для этого нужно создать два потока, работающие с одной разделяемой переменной.

Первый поток имитирует клиента: раз в секунду он обращается к счётчику клиентов и увеличивает его на 1. Максимальное количество клиентов должно быть параметризировано.

Второй поток имитирует операциониста: раз в 2 секунды он обращается к счётчику клиентов и уменьшает его на 1. «Операционист» работает до последнего клиента.
</details>
### Задание 2
<details>
#### Параллельные вычисления

- Напишите программу для расчёта суммы двух векторов.
- Распараллельте эту программу на 2, 4, 8 и 16 потоков.
- Определите, какое количество потоков даёт самый быстрый результат.
- Сравните результаты выполнения для массивов из 1 000, 10 000, 100 000 и 1 000 000 элементов.
- Время выполнения для каждого варианта сведите в таблицу и выведите её в консоль.
- Первый запущенный поток должен вывести на экран доступное количество аппаратных ядер.

![](./pic1.png)
</details>


## Тема 2


### Задание 1
<details>
#### Атомарная очередь клиентов

Нужно модифицировать [задание 1 к первому уроку](https://github.com/netology-code/map-homeworks/tree/main/01) так, чтобы счётчик клиентов был атомарным.<br/>
Все операции со счётчиков должны быть атомарными.<br/>
Проверьте работу различными способами упорядочения доступа к памяти.

</details>
### Задание 2
<details>
#### Прогресс-бар

Создайте консольное приложение для имитации многопоточного расчёта.<br/>
Количество потоков, длина расчёта должны быть заданы переменными.<br/>
В консоль во время работы программы должны построчно для каждого потока выводиться:

	• номер потока по порядку;
	
	• идентификатор потока;
	
	• заполняющийся индикатор наподобие прогресс-бара, визуализирующий процесс «расчёта»;
	
	• после завершения работы каждого потока в соответствующей строке суммарное время, затраченное на работу потока.
 
 Строки прогресс-баров каждого потока должны выводиться одновремено. Время появления каждого нового символа в строке прогресс-бара подберите так, чтобы процесс заполнения строки был виден. Пример работы программы [по ссылке.]( https://cloud.mail.ru/public/MZVL/AqpmAkcMp)


#### Дополнение к заданию 2*

Во время очередной итерации «расчёта» сымитируйте со случайной вероятностью возникновение ошибки (exception), которая не должна приводить к прекращению работы потока или программы. При этом этот факт должен визуализироваться отдельным цветом на прогресс-баре.
</details>
### Задание 3
<details>
#### Защищённый обмен данными

- Создайте класс Data, содержащий в качестве полей скалярные данные и мьютекс.
- Создайте функцию swap, которая принимает ссылки на два объекта класса Data и обменивает их местами.<br/>
- В функциях нужно сначала захватить мьютексы обоих объектов, а затем выполнить обмен данными.
- Реализуйте три варианта этой функции: при помощи lock, scoped_lock и unique_lock.
- </details>
